import{r as i,j as e}from"./index-zV5l4ZMH.js";const I=[{name:"Nature",url:"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?q=80&w=400&auto=format&fit=crop"},{name:"Architecture",url:"https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?q=80&w=400&auto=format&fit=crop"},{name:"Abstract",url:"https://images.unsplash.com/photo-1541701494587-cb58502866ab?q=80&w=400&auto=format&fit=crop"}],R=({useUrl:l})=>{const[g,N]=i.useState(null),[k,y]=i.useState([]),[h,f]=i.useState(""),[c,m]=i.useState(!1),[w,p]=i.useState(null),j=i.useRef(null),n=(t,o=!1)=>{m(!0),p(null),N(t);const a=new Image;a.crossOrigin="anonymous",a.onload=()=>{const s=j.current;if(!s)return;const d=s.getContext("2d",{willReadFrequently:!0});if(d){s.width=a.width,s.height=a.height,d.drawImage(a,0,0);try{const r=d.getImageData(0,0,s.width,s.height).data,u=new Set;let v=0;for(;u.size<10&&v<200;){const x=Math.floor(Math.random()*(r.length/4))*4;if(r[x+3]>125){const b=S=>S.toString(16).padStart(2,"0").toUpperCase();u.add(`#${b(r[x])}${b(r[x+1])}${b(r[x+2])}`)}v++}y(Array.from(u)),m(!1)}catch{!o&&l?n(`https://api.allorigins.win/raw?url=${encodeURIComponent(t)}`,!0):(p("Security restricted: This website blocks color extraction. Please upload the image manually."),m(!1))}}},a.onerror=()=>{!o&&l?n(`https://api.allorigins.win/raw?url=${encodeURIComponent(t)}`,!0):(p("Could not load image. The link might be broken or protected."),m(!1))},a.src=t},C=t=>{var a;const o=(a=t.target.files)==null?void 0:a[0];if(o){const s=new FileReader;s.onload=d=>{var r;return n((r=d.target)==null?void 0:r.result)},s.readAsDataURL(o)}};return e.jsxs("div",{className:"max-w-6xl mx-auto py-16 px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-indigo-600 text-white text-3xl mb-6 shadow-xl shadow-indigo-600/20",children:l?"ðŸ”—":"ðŸ“·"}),e.jsx("h1",{className:"text-5xl font-black mb-4 tracking-tight",children:l?"Palette from Image URL":"Image Color Extractor"}),e.jsx("p",{className:"text-slate-500 max-w-2xl mx-auto text-lg",children:l?"Extract visual DNA from any web image. We use a proxy to bypass most CORS restrictions.":"Professional-grade color sampling from your local design assets."})]}),e.jsxs("div",{className:"max-w-3xl mx-auto mb-16 space-y-6",children:[e.jsx("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-[2.5rem] border border-slate-200 dark:border-slate-800 shadow-2xl shadow-indigo-500/5",children:l?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"text",placeholder:"Paste direct image link (e.g. from Unsplash or Pinterest)...",value:h,onChange:t=>f(t.target.value),className:"flex-grow p-4 bg-slate-50 dark:bg-slate-800 border dark:border-slate-700 rounded-2xl outline-none focus:ring-4 focus:ring-indigo-500/10 font-mono text-sm"}),e.jsx("button",{onClick:()=>n(h),disabled:c||!h,className:"px-8 py-4 bg-indigo-600 text-white rounded-2xl font-bold hover:bg-indigo-700 disabled:opacity-50 transition-all",children:c?"Analyzing...":"Extract"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Try a sample:"}),e.jsx("div",{className:"flex gap-2",children:I.map(t=>e.jsx("button",{onClick:()=>{f(t.url),n(t.url)},className:"px-3 py-1 bg-slate-100 dark:bg-slate-800 rounded-lg text-[10px] font-bold hover:bg-indigo-500 hover:text-white transition-all",children:t.name},t.name))})]})]}):e.jsxs("div",{className:"border-4 border-dashed border-slate-100 dark:border-slate-800 rounded-[2rem] p-12 text-center relative group hover:border-indigo-500/50 transition-all",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:C,className:"absolute inset-0 opacity-0 cursor-pointer z-10"}),e.jsx("div",{className:"text-5xl mb-4 group-hover:scale-110 transition-transform",children:"ðŸ“"}),e.jsx("p",{className:"text-slate-500 font-bold",children:"Select Image to Extract Palette"})]})}),w&&e.jsxs("div",{className:"p-4 bg-rose-50 dark:bg-rose-900/20 border border-rose-100 dark:border-rose-900/50 rounded-2xl text-rose-600 dark:text-rose-400 text-sm flex gap-3",children:[e.jsx("span",{children:"âš ï¸"})," ",e.jsx("p",{children:w})]})]}),(g||c)&&e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 animate-in fade-in slide-in-from-bottom-8 duration-700",children:[e.jsx("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-[2.5rem] border dark:border-slate-800 shadow-xl overflow-hidden",children:e.jsxs("div",{className:"relative aspect-video bg-slate-100 dark:bg-slate-800 rounded-2xl overflow-hidden flex items-center justify-center",children:[c&&e.jsx("div",{className:"absolute inset-0 z-10 bg-white/60 dark:bg-slate-900/60 backdrop-blur-sm flex items-center justify-center",children:e.jsx("div",{className:"w-10 h-10 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"})}),g&&e.jsx("img",{src:g,className:"w-full h-full object-contain",alt:"Preview"})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-2xl font-black",children:"Detected Palette"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:k.map((t,o)=>e.jsxs("div",{className:"group bg-white dark:bg-slate-900 p-3 rounded-2xl border dark:border-slate-800 hover:shadow-lg transition-all cursor-pointer",onClick:()=>navigator.clipboard.writeText(t),children:[e.jsx("div",{className:"h-20 w-full rounded-xl mb-3 shadow-inner",style:{backgroundColor:t}}),e.jsxs("div",{className:"flex justify-between items-center px-1",children:[e.jsx("span",{className:"text-xs font-mono font-bold",children:t}),e.jsx("span",{className:"text-[9px] font-black text-indigo-500 opacity-0 group-hover:opacity-100 transition-opacity",children:"COPY"})]})]},o))})]})]}),e.jsx("canvas",{ref:j,className:"hidden"})]})};export{R as default};
